@page "/"
@inherits FluxorComponent
@inject IState<MediaState> MediaState
@inject StateFacade Facade

<SearchComponent SearchWord="@_searchWord" Placeholder="Search for movies or TV series" />
<TrendingMediaComponent SearchWord="@_searchWord" Media="MediaState.Value.Medias" />

<h2 class="recommended">Recommended for you</h2>

@if (MediaState.Value.IsLoading)
{
}

else if (MediaState.Value.HasCurrentErrors)
{
    <p>Whoops! Looks like an issue occurred loading media :(</p>
}
else if (!(MediaState.Value.Medias is null) && MediaState.Value.Medias.Any())
{
    <MediaComponent SearchWord="@_searchWord" MovieCategory="Movie" TvCategory="TV Series" Media="MediaState.Value.Medias"/>
}


@code
{
    private string _searchWord = "";

    protected override void OnInitialized()
    {
        if (MediaState.Value.Medias is null)
        {
            Facade.LoadMedia();
        }

        base.OnInitialized();
    }
}

